
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>What comes after ML model development? &#8212; RecSys Handbook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=4ec06e9971c5264fbd345897d5258098f11cc577" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=8bf782fb4ee92b3d3646425e50f299c4e1fd152d"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-1KXERRXYG5"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-1KXERRXYG5');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapter2/intro_to_deployment';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Application Programming Interface (API)" href="api_dev.html" />
    <link rel="prev" title="Full Pipeline of the Two-level Recommender System" href="../chapter1/full_pipeline.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">RecSys Handbook</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/intro_to_rekko.html">
                        Introduction to Recommendation Problem
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/baseline.html">
                        Baseline Implementation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/validation_metrics.html">
                        Metrics & Validation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/content_filter.html">
                        Content-Based Filtering
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/collab_filter.html">
                        Collaborative Filtering
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/ranker.html">
                        Ranking Problem in Machine Learning
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/full_pipeline.html">
                        Full Pipeline of the Two-level RecSys
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Introduction to Production Code & Deployment
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_dev.html">
                        API Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="docker.html">
                        Containerization with Docker
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter3/intro_to_analytics.html">
                        INTRODUCTION TO PRODUCT ANALYTCS
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/intro_to_rekko.html">
                        Introduction to Recommendation Problem
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/baseline.html">
                        Baseline Implementation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/validation_metrics.html">
                        Metrics & Validation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/content_filter.html">
                        Content-Based Filtering
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/collab_filter.html">
                        Collaborative Filtering
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/ranker.html">
                        Ranking Problem in Machine Learning
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter1/full_pipeline.html">
                        Full Pipeline of the Two-level RecSys
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Introduction to Production Code & Deployment
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_dev.html">
                        API Development
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="docker.html">
                        Containerization with Docker
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../chapter3/intro_to_analytics.html">
                        INTRODUCTION TO PRODUCT ANALYTCS
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">RecSys Handbook</p>
  
</a>
    </div>
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome To The World Of Recommendations and Ranking
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">CHAPTER 1 - OVERVIEW OF RECOMMENDATION SYSTEMS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../chapter1/intro_to_rekko.html">Introduction to Recommendation Problem</a></li>

<li class="toctree-l1"><a class="reference internal" href="../chapter1/baseline.html">Baseline Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapter1/validation_metrics.html">Metrics &amp; Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapter1/content_filter.html">Content-based Filtering in a Nutshell</a></li>

<li class="toctree-l1"><a class="reference internal" href="../chapter1/collab_filter.html">Collaborative Filtering</a></li>

<li class="toctree-l1"><a class="reference internal" href="../chapter1/ranker.html">Ranking Problem</a></li>


<li class="toctree-l1"><a class="reference internal" href="../chapter1/full_pipeline.html">Full Pipeline of the Two-level Recommender System</a></li>




</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">CHAPTER 2 - PRODUCTION CODE &amp; DEPLOYMENT</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">What comes after ML model development?</a></li>



<li class="toctree-l1"><a class="reference internal" href="api_dev.html">Application Programming Interface (<code class="docutils literal notranslate"><span class="pre">API</span></code>)</a></li>

<li class="toctree-l1"><a class="reference internal" href="docker.html">Containerization with Docker</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">CHAPTER 3 - Estimation of RecSys and other ML models in real world</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../chapter3/intro_to_analytics.html">Introduction to Product Analytics</a></li>

</ul>

    </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        <label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" data-toggle="tooltip" data-placement="right" title="Toggle primary sidebar">
            <span class="fa-solid fa-bars"></span>
        </label>
    </div>
    <div class="header-article__right">


<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
  </ul>
</div>

<button onclick="toggleFullScreen()"
  class="btn btn-sm"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<div class="dropdown dropdown-repository-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="https://github.com/kshurik/rekko_handbook" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">repository</span>
</a>
</a>
      
      <li><a href="https://github.com/kshurik/rekko_handbook/issues/new?title=Issue%20on%20page%20%2Fchapter2/intro_to_deployment.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">open issue</span>
</a>
</a>
      
  </ul>
</div>



<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="../_sources/chapter2/intro_to_deployment.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</a>
      
      <li><a href="../_sources/chapter2/intro_to_deployment.md" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</a>
      
      <li>
<button onclick="printPdf(this)"
  class="btn btn-sm dropdown-item"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</a>
      
  </ul>
</div>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary" data-toggle="tooltip" data-placement="left" title="Toggle secondary sidebar">
            <span class="fa-solid fa-list"></span>
        </label>
    </div>
</div>
            </div>
            
            

<div id="jb-print-docs-body" class="onlyprint">
    <h1>What comes after ML model development?</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   What comes after ML model development?
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#developement-tools">
   Developement tools
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#poetry">
     Poetry
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#styling-guide-and-code-quality">
     Styling guide and code quality
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#makefile">
     Makefile
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-for-our-recsys-project">
   Architecture for our RecSys Project
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-structure-the-project">
   How to structure the project
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>

            <article class="bd-article" role="main">
              
  <section class="tex2jax_ignore mathjax_ignore" id="what-comes-after-ml-model-development">
<span id="chapter2-part1"></span><h1>What comes after ML model development?<a class="headerlink" href="#what-comes-after-ml-model-development" title="Permalink to this heading">#</a></h1>
<p>This chapter describes what is production code and how to write it using complementary tools
such as <code class="docutils literal notranslate"><span class="pre">poetry</span></code>, <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> and code styling modules like <code class="docutils literal notranslate"><span class="pre">pylint</span></code>, <code class="docutils literal notranslate"><span class="pre">black</span></code>, <code class="docutils literal notranslate"><span class="pre">isort</span></code> and <code class="docutils literal notranslate"><span class="pre">flake8</span></code>.
Finally, we will define the architecture of our production microservice of RecSys we developed in
<a class="reference external" href="https://rekkobook.com/chapter1/full_pipeline.html">Chapter 1</a></p>
<p>After developing a machine learning (ML) model, the next step is to write production code
that enables the model to function in a real-world environment. Production code is typically
written in a programming language such as Python and executed on a server or virtual machine
that is accessible to end users. The goal of production code is to ensure that the ML model
performs as expected in a production environment, including handling real-world data, scaling
to meet demand, and providing accurate and timely predictions.</p>
<p>To ensure that production code is robust, scalable, and reliable, different skills are required
than those needed for research or experimentation. The production code pipeline involves several steps,
including:</p>
<ul class="simple">
<li><p>Replicating the development environment for full reproducibility of results;</p></li>
<li><p>Data preparation such as collecting necessary input and calculating runtime features;</p></li>
<li><p>Inference and postprocessing that includes making final predictions and any necessary
postprocessing of predictions, such as scaling</p></li>
</ul>
<p>In addition, strong coding requirements must be met which can be tracked and fixed using:</p>
<ul class="simple">
<li><p>Use a consistent coding style and naming convention</p></li>
<li><p>Write clear and concise comments</p></li>
<li><p>Include error handling and logging</p></li>
<li><p>Use version control to track changes and collaborate with others</p></li>
<li><p>Write unit tests to ensure that the code works as expected</p></li>
</ul>
<p>Therefore, various tools besides model and Python code are used. Here, let’s make an overview of these tools
that is used in development today.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="developement-tools">
<h1>Developement tools<a class="headerlink" href="#developement-tools" title="Permalink to this heading">#</a></h1>
<section id="poetry">
<h2>Poetry<a class="headerlink" href="#poetry" title="Permalink to this heading">#</a></h2>
<p>The first tool to use when creating a production service or even any ML project to have full reproducibility
of the results is library version control. Previously, <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> was very popular among developers
and Data Scientists. It is pretty straightforward in usage – add the name and version of the library with a new line</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pandas</span><span class="o">==</span><span class="mf">1.1.5</span>
<span class="n">numpy</span><span class="o">==</span><span class="mf">1.23.5</span>
<span class="n">etc</span><span class="o">.</span>
</pre></div>
</div>
<p>However, more advanced config management has been discovered <a class="reference external" href="https://python-poetry.org/"><code class="docutils literal notranslate"><span class="pre">poetry</span></code></a> which allows
to use it for dependencies management and configuration file for popular dev tools (we will discuss it later).
The main features are:</p>
<ul class="simple">
<li><p>Dependencies management - resolves all dependencies for each library in the correct order. When using requirements.txt,
developers have to manually manage the installation and updating of dependencies. This can be time-consuming
and error-prone, especially when dealing with complex projects that have multiple dependencies. In contrast,
Poetry automates most of the dependency management process, making it easier to install, update, and remove dependencies.;</p></li>
<li><p>Isolated virtualenv - automatically creates a virtual environment for reproducibility with a given Python version
and libraries (no need to execute by hand, just one line of command in CLI);</p></li>
<li><p>CLI interaction to manage configuration files - intuitive commands to add/remove/install dependencies;</p></li>
<li><p>BONUS: some parameters for the <code class="docutils literal notranslate"><span class="pre">pylint</span></code> styling guide, etc. can be set within the same config!</p></li>
</ul>
<p>Now, let’s discuss details about how to use it. To initialize the config we need to run the installation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">install</span><span class="o">.</span><span class="n">python</span><span class="o">-</span><span class="n">poetry</span><span class="o">.</span><span class="n">org</span> <span class="o">|</span> <span class="n">python3</span> <span class="o">-</span>
</pre></div>
</div>
<p>Then, we can initialize the poetry config by executing (assuming we want to create dependency management for the pre-existing project)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">init</span>
</pre></div>
</div>
<p>After we run, several optional questions will be asked to create the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file – the main configuration file.
You can either fill it (for instance set the Python version) or just press enter to use suggested default values.</p>
<p>Next, we add package names as following</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">add</span> <span class="n">pandas</span>
</pre></div>
</div>
<p>or specific version</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">add</span> <span class="n">pandas</span><span class="o">==</span><span class="mf">1.5.1</span>
</pre></div>
</div>
<p>Further, it creates a virtual environment with all packages and you can use it to run your scripts/notebooks
or run by using bash commands</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">run</span> <span class="n">python</span> <span class="n">inference</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Also, you can set various parameters by utilizing the full power of TOML extensions. Below there is an example of
a full poetry set-up generated for illustration purposes.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[tool.poetry]</span></code> - meta-information about the project</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[tool.poetry.dependencies]</span></code> - main dependencies used in production</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[tool.poetry.group.dev.dependencies]</span></code> - development packages only needed for test and code style guides</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[build-system]</span></code> - poetry system parameters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[tool.isort],</span> <span class="pre">[tool.black],</span> <span class="pre">[tool.pylint]</span></code> - parameters to set up custom code style and checks.
We will discuss them in the next part.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">poetry</span><span class="p">]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;rekko_handbook&quot;</span>
<span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;0.1.0&quot;</span>
<span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;RecSys Handbook&quot;</span>
<span class="n">authors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;khalilbekov92@gmail.com&quot;</span><span class="p">]</span>
<span class="n">readme</span> <span class="o">=</span> <span class="s2">&quot;README.md&quot;</span>
<span class="n">packages</span> <span class="o">=</span> <span class="p">[{</span><span class="n">include</span> <span class="o">=</span> <span class="s2">&quot;rekko_handbook&quot;</span><span class="p">}]</span>

<span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">poetry</span><span class="o">.</span><span class="n">dependencies</span><span class="p">]</span>
<span class="n">python</span> <span class="o">=</span> <span class="s2">&quot;&gt;=3.9,&lt;3.12&quot;</span>
<span class="n">loguru</span> <span class="o">=</span> <span class="s2">&quot;0.6.0&quot;</span>
<span class="n">pandas</span> <span class="o">=</span> <span class="s2">&quot;1.5.3&quot;</span>
<span class="n">presto</span><span class="o">-</span><span class="n">python</span><span class="o">-</span><span class="n">client</span> <span class="o">=</span> <span class="s2">&quot;0.8.3&quot;</span>
<span class="n">clickhouse</span><span class="o">-</span><span class="n">driver</span> <span class="o">=</span> <span class="s2">&quot;0.2.5&quot;</span>
<span class="n">dynaconf</span> <span class="o">=</span> <span class="s2">&quot;^3.1.12&quot;</span>
<span class="n">torch</span> <span class="o">=</span> <span class="s2">&quot;^2.0.0&quot;</span>
<span class="n">transformers</span> <span class="o">=</span> <span class="s2">&quot;^4.27.3&quot;</span>
<span class="n">tqdm</span> <span class="o">=</span> <span class="s2">&quot;^4.65.0&quot;</span>
<span class="n">scipy</span> <span class="o">=</span> <span class="s2">&quot;^1.10.1&quot;</span>
<span class="n">scikit</span><span class="o">-</span><span class="n">learn</span> <span class="o">=</span> <span class="s2">&quot;^1.2.2&quot;</span>
<span class="n">boto3</span> <span class="o">=</span> <span class="s2">&quot;^1.26.106&quot;</span>
<span class="n">python</span><span class="o">-</span><span class="n">dotenv</span> <span class="o">=</span> <span class="s2">&quot;^1.0.0&quot;</span>

<span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">poetry</span><span class="o">.</span><span class="n">group</span><span class="o">.</span><span class="n">dev</span><span class="o">.</span><span class="n">dependencies</span><span class="p">]</span>
<span class="n">pytest</span> <span class="o">=</span> <span class="s2">&quot;^7.2.2&quot;</span>
<span class="n">pylint</span> <span class="o">=</span> <span class="s2">&quot;^2.17.1&quot;</span>
<span class="n">flake8</span> <span class="o">=</span> <span class="s2">&quot;^6.0.0&quot;</span>
<span class="n">black</span> <span class="o">=</span> <span class="s2">&quot;^23.1.0&quot;</span>
<span class="n">isort</span> <span class="o">=</span> <span class="s2">&quot;^5.12.0&quot;</span>
<span class="n">pytest</span><span class="o">-</span><span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;^3.2.0&quot;</span>

<span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">isort</span><span class="p">]</span>
<span class="n">line_length</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">multi_line_output</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">include_trailing_comma</span> <span class="o">=</span> <span class="n">true</span>

<span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">black</span><span class="p">]</span>
<span class="n">line</span><span class="o">-</span><span class="n">length</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">target</span><span class="o">-</span><span class="n">version</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;py39&#39;</span><span class="p">]</span>
<span class="n">skip</span><span class="o">-</span><span class="n">string</span><span class="o">-</span><span class="n">normalization</span> <span class="o">=</span> <span class="n">true</span>

<span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">system</span><span class="p">]</span>
<span class="n">requires</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;poetry-core&gt;=1.4.1&quot;</span><span class="p">]</span>
<span class="n">build</span><span class="o">-</span><span class="n">backend</span> <span class="o">=</span> <span class="s2">&quot;poetry.core.masonry.api&quot;</span>

<span class="p">[</span><span class="n">tool</span><span class="o">.</span><span class="n">pylint</span><span class="o">.</span><span class="s1">&#39;FORMAT&#39;</span><span class="p">]</span>
<span class="nb">min</span><span class="o">-</span><span class="n">similarity</span><span class="o">-</span><span class="n">lines</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">fail</span><span class="o">-</span><span class="n">under</span> <span class="o">=</span> <span class="mf">9.7</span>
<span class="n">py</span><span class="o">-</span><span class="n">version</span> <span class="o">=</span> <span class="mf">3.9</span>
<span class="n">good</span><span class="o">-</span><span class="n">names</span><span class="o">=</span><span class="p">[</span>
    <span class="s1">&#39;bp&#39;</span><span class="p">,</span>
    <span class="s1">&#39;db&#39;</span><span class="p">,</span>
    <span class="s1">&#39;df&#39;</span>
<span class="p">]</span>
<span class="nb">max</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span> <span class="o">=</span> <span class="mi">120</span>
<span class="n">disable</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;locally-disabled&#39;</span><span class="p">,</span> <span class="s1">&#39;suppressed-message&#39;</span><span class="p">,</span>
    <span class="s1">&#39;missing-module-docstring&#39;</span><span class="p">,</span> <span class="s1">&#39;missing-class-docstring&#39;</span><span class="p">,</span>
    <span class="s1">&#39;missing-function-docstring&#39;</span><span class="p">,</span> <span class="s1">&#39;too-few-public-methods&#39;</span><span class="p">,</span>
    <span class="s1">&#39;wrong-import-position&#39;</span><span class="p">,</span> <span class="s1">&#39;import-outside-toplevel&#39;</span><span class="p">,</span>
    <span class="s1">&#39;fixme&#39;</span><span class="p">,</span> <span class="s1">&#39;too-many-locals&#39;</span><span class="p">,</span> <span class="s1">&#39;too-many-arguments&#39;</span><span class="p">,</span>
    <span class="s1">&#39;too-many-instance-attributes&#39;</span><span class="p">,</span> <span class="s1">&#39;c-extension-no-member&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Overall, poetry provides an easy and efficient way to reproduce development environment,
resolve dependencies and allows using customization in some dev tools.</p>
</section>
<section id="styling-guide-and-code-quality">
<h2>Styling guide and code quality<a class="headerlink" href="#styling-guide-and-code-quality" title="Permalink to this heading">#</a></h2>
<p>As we have mentioned earlier, production code must be robust, scalable &amp; reliable. Tracking
the quality of the code by reviews only is exhaustive and almost impossible to achieve – we
are prone to errors too. However, most common mistakes like typos and convenient bugs can
be checked automatically and fixed. Here, we will describe the main Python tools to achieve that</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[pylint]</span></code>(<a class="reference external" href="https://pypi.org/project/pylint/">https://pypi.org/project/pylint/</a>) - code analyzer which does not run your code.
It checks for errors, and the coding standard makes clear suggestions on how to improve it
and even grade it on a scale of 0 to 10;</p></li>
</ul>
<p><img alt="" src="img/pylint.png" /></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[black]</span></code>(<a class="reference external" href="https://pypi.org/project/black/">https://pypi.org/project/black/</a>) - in the Python community there is well-known
PEP-8 standard to follow. This library is a code formatter which is PEP 8-compliant
opinionated formatter. It formats all code in given directory/files in place fast and efficiently;</p></li>
</ul>
<p>Before formatting with black</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">some_kaif_function</span><span class="p">(</span><span class="n">input_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">param_1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">param_2</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    some example function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">input_df</span><span class="p">[</span><span class="s1">&#39;check_bool&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">input_df</span><span class="p">[</span><span class="n">param_2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">param_1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">input_df</span><span class="p">[</span><span class="n">param_2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">param_1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">input_df</span>
</pre></div>
</div>
</div>
</div>
<p>After formatting with black</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">some_kaif_function</span><span class="p">(</span><span class="n">input_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">param_1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">param_2</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    some example function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">input_df</span><span class="p">[</span><span class="s2">&quot;check_bool&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
        <span class="p">(</span><span class="n">input_df</span><span class="p">[</span><span class="n">param_2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">param_1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">input_df</span><span class="p">[</span><span class="n">param_2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">param_1</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">]</span>
    
    <span class="k">return</span> <span class="n">input_df</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[isort]</span></code>(<a class="reference external" href="https://pycqa.github.io/isort/">https://pycqa.github.io/isort/</a>) - a library to make appropriate imports:
alphabetical order and group by types to sections. Below is the example from the official homepage</p></li>
</ul>
<p>Before the isort</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">my_lib</span> <span class="kn">import</span> <span class="n">Object</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">my_lib</span> <span class="kn">import</span> <span class="n">Object3</span>

<span class="kn">from</span> <span class="nn">my_lib</span> <span class="kn">import</span> <span class="n">Object2</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">third_party</span> <span class="kn">import</span> <span class="n">lib15</span><span class="p">,</span> <span class="n">lib1</span><span class="p">,</span> <span class="n">lib2</span><span class="p">,</span> <span class="n">lib3</span><span class="p">,</span> <span class="n">lib4</span><span class="p">,</span> <span class="n">lib5</span><span class="p">,</span> <span class="n">lib6</span><span class="p">,</span> <span class="n">lib7</span><span class="p">,</span> <span class="n">lib8</span><span class="p">,</span> <span class="n">lib9</span><span class="p">,</span> <span class="n">lib10</span><span class="p">,</span> <span class="n">lib11</span><span class="p">,</span> <span class="n">lib12</span><span class="p">,</span> <span class="n">lib13</span><span class="p">,</span> <span class="n">lib14</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="kn">from</span> <span class="nn">third_party</span> <span class="kn">import</span> <span class="n">lib3</span>
</pre></div>
</div>
<p>After isort</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">third_party</span> <span class="kn">import</span> <span class="p">(</span><span class="n">lib1</span><span class="p">,</span> <span class="n">lib2</span><span class="p">,</span> <span class="n">lib3</span><span class="p">,</span> <span class="n">lib4</span><span class="p">,</span> <span class="n">lib5</span><span class="p">,</span> <span class="n">lib6</span><span class="p">,</span> <span class="n">lib7</span><span class="p">,</span> <span class="n">lib8</span><span class="p">,</span>
                         <span class="n">lib9</span><span class="p">,</span> <span class="n">lib10</span><span class="p">,</span> <span class="n">lib11</span><span class="p">,</span> <span class="n">lib12</span><span class="p">,</span> <span class="n">lib13</span><span class="p">,</span> <span class="n">lib14</span><span class="p">,</span> <span class="n">lib15</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">my_lib</span> <span class="kn">import</span> <span class="n">Object</span><span class="p">,</span> <span class="n">Object2</span><span class="p">,</span> <span class="n">Object3</span>

</pre></div>
</div>
</section>
<section id="makefile">
<h2>Makefile<a class="headerlink" href="#makefile" title="Permalink to this heading">#</a></h2>
<p>Makefiles are important tools for managing and automating the building and
deployment of software projects. In Python development, Makefiles are especially
useful in managing the compilation, packaging, and testing of code. A Makefile
is essentially a script that defines a set of rules and actions to be performed
when certain conditions are met. These rules can be used to automate repetitive
tasks, such as compiling code, running tests, and generating documentation.</p>
<p>They are particularly useful for large projects with many files and dependencies,
as they allow developers to quickly and easily build, test, and deploy their code
without having to manually type in commands for each step.</p>
<p>For example, let’s say you have a Python project with multiple modules, each with
its dependencies. You would need to install these dependencies and set up
the environment to run the project. With a Makefile, you can automate this
process by defining targets for each step of the build,
such as “install dependencies”, “set up environment”, “run tests”, etc.</p>
<p>Here’s an example Makefile for a Python project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># install dependencies</span>
<span class="n">install</span><span class="p">:</span>
    <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>

<span class="c1"># set up the environment</span>
<span class="n">setup</span><span class="p">:</span>
    <span class="n">virtualenv</span> <span class="n">env</span>
    <span class="n">source</span> <span class="n">env</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>

<span class="c1"># run tests</span>
<span class="n">test</span><span class="p">:</span>
    <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span>

<span class="c1"># clean up the environment</span>
<span class="n">clean</span><span class="p">:</span>
    <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">env</span><span class="o">/</span>
    <span class="nd">@find</span> <span class="o">.</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">__pycache__</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">rm</span> <span class="o">-</span><span class="n">rf</span>

<span class="c1"># let&#39;s add formatting stuff here as well</span>

<span class="n">pylint</span><span class="p">:</span>
    <span class="n">pylint</span> <span class="n">app</span> <span class="n">config</span> <span class="n">tests</span> <span class="c1"># folder names</span>

<span class="n">isort</span><span class="p">:</span>
    <span class="n">isort</span> <span class="n">app</span> <span class="n">config</span> <span class="n">tests</span> <span class="o">--</span><span class="n">jobs</span><span class="o">=</span><span class="mi">0</span>

<span class="n">black</span><span class="p">:</span>
    <span class="n">black</span> <span class="n">app</span> <span class="n">config</span> <span class="n">tests</span>

<span class="n">fmt</span><span class="p">:</span> <span class="n">isort</span> <span class="n">black</span>
</pre></div>
</div>
<p>This Makefile defines four targets: <code class="docutils literal notranslate"><span class="pre">install</span></code>, <code class="docutils literal notranslate"><span class="pre">setup</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span></code>, and <code class="docutils literal notranslate"><span class="pre">clean</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> will install all the dependencies listed in <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">setup</span></code> will create a virtual environment and activate it;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code> will run all the tests in the <code class="docutils literal notranslate"><span class="pre">tests</span></code> directory;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> will remove the virtual environment and any cached Python files;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pylint</span></code> will run a code formatting check;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">isort</span></code> will do a proper import of modules;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">black</span></code> will run formatting in place;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">fmt</span></code> will call <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">isort</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">black</span></code> for full formatting</p></li>
</ul>
<p>Overall, Makefiles are important for Python development because they automate
the many routine processes, making it easier and faster for developers
to build, test, and deploy their code.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="architecture-for-our-recsys-project">
<h1>Architecture for our RecSys Project<a class="headerlink" href="#architecture-for-our-recsys-project" title="Permalink to this heading">#</a></h1>
<p>Let’s recall the two-level architecture of a recommender system consists of two main components:
the candidate generator and the ranker. The candidate generator is responsible for
selecting a set of items that are likely to be of interest to the user, and the ranker
takes those items and ranks them in order of predicted relevance to the user. Keeping
that in mind, the architecture for the light version will be as follows:</p>
<p><img alt="" src="img/recsys_architecture.png" /></p>
<p>Here is a detailed description of each component:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Client-user</span> <span class="pre">interface</span></code> to interact with the product;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">First-level</span> <span class="pre">model</span> <span class="pre">a.k.a</span> <span class="pre">candidate</span> <span class="pre">Generator</span></code>: The candidate generator is the first level in the
recommender system architecture. Its role is to select a set of items that are likely to be of
interest to the user. It is usually designed to be very fast and efficient, as it needs to process
a large number of potential items in a short amount of time.
In the architecture above service described, the candidate generator receives a <code class="docutils literal notranslate"><span class="pre">user_id</span></code> as an
input and uses a first-level model to select a set of candidate items that are likely to be of
interest to that user. The output of the candidate generator is a set of movie ids;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FeatureStore</span></code> - a feature store is a centralized repository of features used in machine learning models.
It enables easy sharing and reuse of features across different models and teams. Instead of storing features in
separate databases, a feature store allows for efficient storage and retrieval of feature for inference.
In this project, we will be using parquet files stored in GDrive as an example, rather than traditional
databases. This will allow for easy integration and understanding key points of the project
instead of technical stuff with data storage;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ReRanker</span></code>: The ranker is the second level in the recommender system architecture. Its role
is to take the set of candidate items generated by the candidate generator and rank them in order
of predicted relevance to the user. The ranker is usually a more complex and computationally
expensive model than the candidate generator, as it needs to process a smaller set of potential
items but with more detailed information</p></li>
</ol>
<p>In our production architecture, the ranker takes the set of candidate items generated
by the first-level model and uses a feature store to enrich the data with additional information
about the items and the user. This additional information could include item features such as genre,
release date, or popularity, as well as user features such as demographics, past purchases,
or browsing history. The ranker then applies a more sophisticated machine learning model to predict
the relevance of each item to the user and sorts the items in order of predicted relevance.
The output of the ranker is a sorted list of items that are likely to be of interest to the user.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="how-to-structure-the-project">
<h1>How to structure the project<a class="headerlink" href="#how-to-structure-the-project" title="Permalink to this heading">#</a></h1>
<p>Structuring an ML service is essential for a well-organized, maintainable, and scalable project.
A well-structured project is easy to understand and easy to modify when requirements change.</p>
<p>There are four base modules for structuring an ML service:</p>
<ul class="simple">
<li><p>configs;</p></li>
<li><p>data preparation;</p></li>
<li><p>models;</p></li>
<li><p>utils</p></li>
</ul>
<p>Configs hold the parameters and settings of the project, data preparation contains the code
for data processing and feature engineering, models contain the code for training, evaluating,
and deploying models, and utils have common functions and classes that are frequently used throughout the project.</p>
<p><code class="docutils literal notranslate"><span class="pre">Configs</span></code> are an essential part of any ML project as they hold the settings and parameters of
the project. Dynaconf is a popular Python package that simplifies working with configurations.
Dynaconf enables developers to store configuration parameters in a file or an environment
variable and read them in their code. An example of working with Dynaconf you can find in our project <a class="reference external" href="https://github.com/kshurik/rekkobook/tree/chapter2/api_example/supplements/recsys/configs">here</a>. It is a set of TOML files with parameters that
are combined together using the Dynaconf loaders</p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span> <span class="pre">preparation</span></code> module is responsible for loading and processing the input data before
feeding it into the ML models. This module may contain functions for tasks such as data cleaning,
normalization, feature engineering, and splitting the data into training and validation sets.
Depending on the nature of the data and the specific ML problem being tackled, this module can be
quite complex and may require its own submodules.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">models</span></code> module contains the actual ML models inference used to make predictions. This module may include
different models for different tasks, as well as the code necessary to train and evaluate these models.
In addition, this module may also include functions for loading and saving pre-trained models,
as well as for fine-tuning models with new data.</p>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">utils</span></code> module contains commonly used functions or classes shared across
different parts of the service. This module may include functions for logging, visualization,
file I/O, or any other utility functions that are not specific to either the data preparation or modeling modules.</p>
<p>Thus, by separating the code into these four modules, the ML service can be organized in a logical
and modular way, making it easier to maintain and extend over time.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapter2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

            </article>
            

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="../chapter1/full_pipeline.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Full Pipeline of the Two-level Recommender System</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="api_dev.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Application Programming Interface (<code class="docutils literal notranslate"><span class="pre">API</span></code>)</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   What comes after ML model development?
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#developement-tools">
   Developement tools
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#poetry">
     Poetry
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#styling-guide-and-code-quality">
     Styling guide and code quality
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#makefile">
     Makefile
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#architecture-for-our-recsys-project">
   Architecture for our RecSys Project
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-structure-the-project">
   How to structure the project
  </a>
 </li>
</ul>

</nav>
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Shuhrat Khalilbekov
</p>

  </div>
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on None.<br>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </div>
        </footer>
        

      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  </body>
</html>